From fc64fd21bcc5e2af9269bbb8639e57f91a360134 Mon Sep 17 00:00:00 2001
From: graysky <therealgraysky@proton.me>
Date: Sat, 28 Jan 2023 08:38:43 -0500
Subject: [PATCH 01/13] makechrootpkg cache dir

---
 src/makechrootpkg.in | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/makechrootpkg.in b/src/makechrootpkg.in
index 9df14e8..218cca9 100644
--- a/src/makechrootpkg.in
+++ b/src/makechrootpkg.in
@@ -300,6 +300,7 @@ while getopts 'hcur:I:l:nCTD:d:U:x:t:' arg; do
 		d) bindmounts_rw+=("--bind=$OPTARG") ;;
 		t) bindmounts_tmpfs+=("--tmpfs=$OPTARG") ;;
 		u) update_first=1 ;;
+    X) cache_dir="$OPTARG" ;;
 		r) passeddir="$OPTARG" ;;
 		I) install_pkgs+=("$OPTARG") ;;
 		l) copy="$OPTARG" ;;
@@ -323,6 +324,10 @@ chrootdir=$(readlink -e "$passeddir")
 [[ ! -d $chrootdir ]] && die "No chroot dir defined, or invalid path '%s'" "$passeddir"
 [[ ! -d $chrootdir/root ]] && die "Missing chroot dir root directory. Try using: mkarchroot %s/root base-devel" "$chrootdir"
 
+if [ -n "$cache_dir" ]; then
+  cache_dir="-c $cache_dir"
+fi
+
 if [[ ${copy:0:1} = / ]]; then
 	copydir=$copy
 else
-- 
2.45.2

